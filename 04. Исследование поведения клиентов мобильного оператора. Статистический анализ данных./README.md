
# Исследование поведения клиентов оператора

Заказчик — кредитный отдел банка - компания «Мегалайн» — федеральный оператор сотовой связи. Клиентам предлагают два тарифных плана: «Смарт» и «Ультра». Чтобы скорректировать рекламный бюджет, коммерческий департамент хочет понять, какой тариф приносит больше денег.

Вам предстоит сделать предварительный анализ тарифов на небольшой выборке клиентов. В вашем распоряжении данные 500 пользователей «Мегалайна»: кто они, откуда, каким тарифом пользуются, сколько звонков и сообщений каждый отправил за 2018 год. Нужно проанализировать поведение клиентов и сделать вывод — какой тариф лучше.

__Описание тарифов:__

1. Тариф «Смарт»
    - Ежемесячная плата: 550 рублей
    - Включено 500 минут разговора, 50 сообщений и 15 Гб интернет-трафика
    - Стоимость услуг сверх тарифного пакета: 1. минута разговора: 3 рубля («Мегалайн» всегда округляет вверх значения минут и мегабайтов. Если пользователь проговорил всего 1 секунду, в тарифе засчитывается целая минута); 2. сообщение: 3 рубля; 3. 1 Гб интернет-трафика: 200 рублей.
    
    
2. Тариф «Ультра»
    - Ежемесячная плата: 1950 рублей
    - Включено 3000 минут разговора, 1000 сообщений и 30 Гб интернет-трафика
    - Стоимость услуг сверх тарифного пакета: 1. минута разговора: 1 рубль; 2. сообщение: 1 рубль; 3. 1 Гб интернет-трафика: 150 рублей.
    
    
__Примечание:__
«Мегалайн» всегда округляет секунды до минут, а мегабайты — до гигабайт. Каждый звонок округляется отдельно: даже если он длился всего 1 секунду, будет засчитан как 1 минута.
Для веб-трафика отдельные сессии не считаются. Вместо этого общая сумма за месяц округляется в бо́льшую сторону. Если абонент использует 1025 мегабайт в этом месяце, с него возьмут плату за 2 гигабайта.


__Описание данных:__


1. Таблица users (информация о пользователях):


    - `user_id` — уникальный идентификатор пользователя
    - `first_name` — имя пользователя
    - `last_name` — фамилия пользователя
    - `age` — возраст пользователя (годы)
    - `reg_date` — дата подключения тарифа (день, месяц, год)
    - `churn_date` — дата прекращения пользования тарифом (если значение пропущено, то тариф ещё действовал на момент выгрузки данных)
    - `city` — город проживания пользователя
    - `tarif` — название тарифного плана<br>
<br>
1. Таблица calls (информация о звонках):

    - `id` — уникальный номер звонка
    - `call_date` — дата звонка
    - `duration` — длительность звонка в минутах
    - `user_id` — идентификатор пользователя, сделавшего звонок<br>
<br>
2. Таблица messages (информация о сообщениях):

    - `id` — уникальный номер звонка
    - `message_date` — дата сообщения
    - `user_id` — идентификатор пользователя, отправившего сообщение<br>
<br>
3. Таблица internet (информация об интернет-сессиях):

    - `id` — уникальный номер сессии
    - `mb_used` — объём потраченного за сессию интернет-трафика (в мегабайтах)
    - `session_date` — дата интернет-сессии
    - `user_id` — идентификатор пользователя<br>
<br>
4. Таблица tariffs (информация о тарифах):

    - `tariff_name` — название тарифа
    - `rub_monthly_fee` — ежемесячная абонентская плата в рублях
    - `minutes_included` — количество минут разговора в месяц, включённых в абонентскую плату
    - `messages_included` — количество сообщений в месяц, включённых в абонентскую плату
    - `mb_per_month_included` — объём интернет-трафика, включённого в абонентскую плату (в мегабайтах)
    - `rub_per_minute` — стоимость минуты разговора сверх тарифного пакета (например, если в тарифе 100 минут разговора в месяц, то со 101 минуты будет взиматься плата)
    - `rub_per_message` — стоимость отправки сообщения сверх тарифного пакета
    - `rub_per_gb` — стоимость дополнительного гигабайта интернет-трафика сверх тарифного пакета (1 гигабайт = 1024 мегабайта)


### Цель исследования – проверить гипотезы:
 1. Cредняя выручка пользователей тарифов «Ультра» и «Смарт» различаются.
 2. Cредняя выручка пользователи из Москвы отличается от выручки пользователей из других регионов.
 
### Ход исследования:
1. Обзор данных:

    По результатам изучения первичной информации можно сделать следуующие наблюдения:

    1. В данных нет пропусков, за исключением пропусков даты прекращения договора, которые означают, что клиент не отказался от услуг оператора.

    2. В таблице звонков есть нулевые значения, означающие пропущенные вызовы. Также нулевые значения есть в таблице расхода интернет трафика - это может быть ошибкой. Нулевые значения могут быть как неудавшейся сессией, когда подключиться к интернету не удалось, либо ошибкой в данных.

    3. В таблице звонков минуты сохранены в вещественном виде, тогда как Мегалайн округляет их в большую сторону. Следует округлить и записать их в целочисленном виде.

    4. Значения дат хранятся в строковом виде, их необходимо перевести в тип datetime.

1. Подготовка данных. В рамках предобработки были сделаны следующие преобразования - данные были приведены к нужному типу, добавлены дополнительные переменные, такие как количество сделанных звонков, отправленных сообщений и т. д.

2. Портрет среднестатистического пользователя и оптимальные тарифы:

    Составим портрет среднестатистического клиента тарифа "Ультра" и клиента тарифа "Смарт" и оценим, насколько пакеты услуг тарифов отвечают этим средним характеристикам. От этого зависит уровень сервиса и удовлетворенность клиентов используемыми тарифами.

    1. Тариф «Смарт»:
       - абоненту 46-47 лет;
       - он совершает около 324 звонков в месяц;
       - при этом он тратит около 421 минуты на разговоры в месяц, при включенных 500 минутах разговора;
       - отправляет 33 из 50 включенных сообщений;
       - тратит 16,2 Гб интернет-трафика из включенных 15 Гб;
       - тратит около 1200 рублей в месяц на связь, из которых 550 - абонентская плата;
       
       Таким образом клиенты значительно переплачивают, так как около половины клиентов используют большее количество минут, сообщений и трафика, чем включенное количество.

       
    2. Тариф «Ультра»:
       - абоненту 46-47 лет;
       - он совершает около 444 звонков в месяц;
       - средняя суммарная длительность которых около 546 минут из 3000 минут разговора, включенных в тариф;
       - отправляет 58 из 1000 включенных в тариф сообщений;
       - тратит 19,8 Гб интернет-трафика из включенных 30 Гб;
       
       Клиент тарифа "Ультра" переплачивает также, так как платит за невостребованные остатки по пакетам, используя незначительное количество сообщений и небольшое количествов включенных минут и чуть больше половины от включенного пакета интернета.

    Более оптимальными пакетами были бы:

    1. Тариф «Смарт»:
        - 500 минута разговора;
        - 50 сообщений;
        - 17 Гб интернет-трафика;
        - 550 рублей - абонентская плата;


    1. Тариф «Медиум»:
        - 800 минут разговора;
        - 120 сообщений;
        - 26 Гб интернет-трафика;
        - 1000 рублей в месяц;


    2. Тариф «Ультра»:
        - 1200 минут разговора;
        - 200 сообщений;
        - 40 Гб интернет-трафика;
        - 1950 рублей в месяц.

1. Исследовательский анализ. Вывод:
   
    По результатам исследования данных можно сказать, что типичные абоненты тарифов "Смарт" и "Ультра" различаются по объему потребления, но абоненты обоих тарифов платят больше, чем необходимо. Абоненты тарифа "Смарт" переплачивают, используя трафик сверх пакета по большей стоимости, чем в пакете, а абоненты тарифа "Ультра" переплачивают, не используя весь включенный в их тариф объем минут, интернета и смс. Можно сказать, что абоненты обоих тарифов нуждаются в некотором промежуточном тарифе, который полностью бы покрывал их потребности и предлагал бы компромиссную цену.

2. Проверка гипотез:

    По результатам проверки гипотез статистическими методами, различие в выручке пользователей из Москвы и регионов не выявлено. Вероятнее всего это обусловлено тем, что связь - базовая потребность в современном мире и меньше зависит от уровня благосостояния, чем потребление прочих благ. Кроме этого стоимость тарифов в Москве и регионах не различается.

    Однако выручка от пользователей тарифов "Смарт" и "Ультра" различаются, что также было выявлено на этапе исследовательского анализа данных. Вероятнее всего выручка от пользователей тарифа "Ультра" выше, чем от пользователей тарифа "Смарт".