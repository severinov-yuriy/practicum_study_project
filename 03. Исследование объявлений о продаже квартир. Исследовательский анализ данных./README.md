# Исследование объявлений о продаже квартир

В вашем распоряжении данные сервиса Яндекс.Недвижимость — архив объявлений о продаже квартир в Санкт-Петербурге и соседних населённых пунктах за несколько лет. Нужно научиться определять рыночную стоимость объектов недвижимости. Ваша задача — установить параметры. Это позволит построить автоматизированную систему: она отследит аномалии и мошенническую деятельность. 

По каждой квартире на продажу доступны два вида данных. Первые вписаны пользователем, вторые получены автоматически на основе картографических данных. Например, расстояние до центра, аэропорта, ближайшего парка и водоёма.

__Описание данных:__

- `airports_nearest` — расстояние до ближайшего аэропорта в метрах (м)
- `balcony` — число балконов
- `ceiling_height` — высота потолков (м)
- `cityCenters_nearest` — расстояние до центра города (м)
- `days_exposition` — сколько дней было размещено объявление (от публикации до снятия)
- `first_day_exposition` — дата публикации
- `floor` — этаж
- `floors_total` — всего этажей в доме
- `is_apartment` — апартаменты (булев тип)
- `kitchen_area` — площадь кухни в квадратных метрах (м²)
- `last_price` — цена на момент снятия с публикации
- `living_area` — жилая площадь в квадратных метрах (м²)
- `locality_name` — название населённого пункта
- `open_plan` — свободная планировка (булев тип)
- `parks_around3000` — число парков в радиусе 3 км
- `parks_nearest` — расстояние до ближайшего парка (м)
- `ponds_around3000` — число водоёмов в радиусе 3 км
- `ponds_nearest` — расстояние до ближайшего водоёма (м)
- `rooms` — число комнат
- `studio` — квартира-студия (булев тип)
- `total_area` — площадь квартиры в квадратных метрах (м²)
- `total_images` — число фотографий квартиры в объявлении

__Ход исследования:__

1. Изучение данных. Выводы:


   1. Имеются данные по 23 699 объектам недвижиомости, но среди них могут быть явные и неявные дубликаты.


   2. В данных довольно много явных пропусков. В следующих столбцах есть пропущенные значения:

       - `ceiling_height` - так как эти данные внесены пользователем, скорее всего пропущенные значения обусловлены тем, что пользователь не указал высоту потолка. Не зная ее или не считая важной характеристикой недвижимости, а может по иным причинам. Так или иначе для этой характеристики можно заполнить пропуски средним значением по населенному пункту, после очистки данных от некорректных значений. Заполнение средним именно по населенному пункту целесообразнее общего среднего, так как в Петербурге большое количество старых зданий с высотой потолков 2.8 и более метров, тогда как в пригородах большинство зданий являются более-менее новыми с низкими потолками;
       - `floors_total` - эти данные также внесены пользователями и пропущены ими же, в силу своих причин и их также можно заполнить средним значением по населенному пункту, так как в Петербурге есть ограничение высотности зданий, чего нет в пригородах и на окраинах, за счет чего средние значения будут отличаться в зависимости от города;
       - `living_area` - так как жилая площадь в значительной степени зависит от общей площади квартиры, заполним пропуски значением средней доли жилой площади от общей площади;
       - `kitchen_area` - для площади кухни действует несколько иная закономерность - площадь кухни не зависит в значительной мере от площади квартиры, целесообразнее взять общее среднее значение площади кухни;
       - `is_apartment` - так как апартаменты не являются преобладающим типом недвижимости, вероятнее всего пропущенные значения можно интерпретировать как свидетельство того, что недвижимость не является апартаментами и заменить на `False`;
       - `balcony` - аналогично апартаментам можно заменить все пропуски на `0`, так как наличие балкона - важная деталь при продаже квартиры, следовательно можно предположить, что если наличие балкона не указано, он отсутсвует;
       - `locality_name` -  к сожалению эти данные заменить невозможно, лучше оставить их неизменными пропусками, благо таких в датасете лишь 49 на почти 24 тысячи объектов;
       - `airports_nearest` - судя по изучаемой выборке, пропуски обусловлены отсутствием аэропорта в городе, поэтому можно оставить их без изменения;
       - `cityCenters_nearest` - ситуация аналогичная близости к аэропортам, пропуски оставляем без изменения;
       - `parks_around3000` - для этой переменной пустое значение вероятно означает отсутствие парков поблизости, поэтому заменим пустые значение нулем;
       - `parks_nearest` - несмотря на схожесть с предыдущей переменной, значение расстояния до парка уже не является дискретным, соответственно заменить пропуски невозможно. Оставим пропуски незаполненными;
       - `ponds_around3000` - ситуация аналогичная количеству парков - заменяем на ноль;
       - `ponds_nearest` - ситуация аналогичная расстоянию до парка - оставляем без изменений;
       - `days_exposition` - так как на рынке недвижимости есть ярко выраженная сезонность, летом и зимой квартиры продаются хуже чем осенью и весной, заменим ее средним значением для дня размещения объявления;


   3. В столбце `first_day_exposition` значение даты и времени хранится в строковом виде, переведем ее в тип datetime. Аналогично столбец `is_apartment`, переведем он трансформируется в булевый тип после заполнения пропусков. В следующих столбцах целочисленные данные хранятся в вещественном виде, что нецелесообразно, так как требует использования дополнительных ресурсов памяти:
       - `last_price`
       - `floors_total`
       - `balcony`
       - `airports_nearest`
       - `cityCenters_nearest`
       - `parks_around3000`
       - `parks_nearest`
       - `ponds_around3000`
       - `days_exposition`
       - `ponds_nearest`

       Заменим в них тип данных на целочисленный.

2. Предобработка данных. Сделанные преобразования - заполнены пропуски, данные приведены к нужному типу.
3. Расчёты и добавление результатов в таблицу. В таблицу добавлены данные о цене квадратного метра, временных параметрах публикации объявления, этаже квартиры, соотношении площадей в квартире.
4. Исследовательский анализ данных. Выводы:

    По большей части на цену квартиры влияет, что очевидно, ее размер и отдаленность от центра. При этом площадь имеет влияние в основном на небольшие квартиры, до 150 квадратных метров, цена больших объектов уже практически не зависит от размера, не нее влияют прочие факторы сильнее.

    Также цена сильно разнится в зависимости от города размещения, в Петербурге и ближайших населенных пунктах цена ощутимо выше, чем в отдаленных, а в центре Петербурга цена выше среднего по городу. При этом центром Петербурга можно считать область радиусом 8 км. В этой области наблюдается зависимость цены от расстояния до центра. На расстоянии большем цена значительно падает и зависимость снижается.

    День недели, месяц и год размещения практически не влияет на цену квартиры. Сезонность не выявлена, как и волнообразная активность внутри недели, однако рост стоимости с годами несколько выражен.

    Тип этажа, на котором она разещена, влияет, но незначительно.

    Есть определенное влияние количества парков, водоемов, планировка квартиры, но точное влияение не определено.

    В зависимости от удаленности от центра, квартиры становятся меньше, дешевле и ниже. Жилая площадь и площадь кухни соответственно уменьшаются тоже. При этом средняя высота дома увеличивается, как и средний этаж.

    Квартиры на окраинах Петербурга больше соответствуют средним по выборке, центральные сильно отличаются.

    Параметры удаленности от парков и водоемов не сильно зависят от расположения квартиры, а вот среднее время продажи зависит - квартиру в центре продать, вероятнее всего сложнее, скорее всего из-за цены и больших размеров такой недвижимости.